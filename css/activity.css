/* =========================================
   Activity Page Styles
   ========================================= */

/* Dashboard Layout */
.activity-dashboard {
    padding: 40px 0 20px;
    background: transparent; /* Assuming global bg is sufficient, or add specific one */
}

.dashboard-grid {
    display: flex;
    flex-direction: column;
    gap: 24px;
}

.dashboard-row-top {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 24px;
    min-height: 320px;
}

.dashboard-row-bottom {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 24px;
    min-height: 200px;
}

/* Featured Card (Blue) */
.featured-card {
    background: linear-gradient(135deg, #0070FF 0%, #0045B0 100%);
    border-radius: 12px;
    padding: 40px;
    position: relative;
    overflow: hidden;
    color: #fff;
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
}

.featured-content {
    position: relative;
    z-index: 2;
    max-width: 60%;
}

.featured-title {
    font-size: 2.2rem;
    font-weight: 700;
    margin-bottom: 24px;
    line-height: 1.2;
}

.featured-info {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-bottom: 32px;
}

.info-item {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 1rem;
    opacity: 0.9;
}

.info-item i {
    width: 18px;
    height: 18px;
}

.tag-status {
    font-size: 0.75rem;
    padding: 2px 8px;
    border-radius: 4px;
    font-weight: 600;
    margin-left: 8px;
}

.tag-status.offline {
    background: #00C853;
    color: #fff;
}

.tag-status.online-yellow {
    background: #FFB300;
    color: #fff;
}

.btn-register {
    background: #003366;
    color: #fff;
    border: none;
    padding: 10px 32px;
    border-radius: 4px;
    font-size: 1rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
}

.btn-register:hover {
    background: #002244;
}

.featured-image {
    position: absolute;
    right: 0;
    bottom: 0;
    width: 50%;
    height: 90%;
    display: flex;
    align-items: flex-end;
    justify-content: flex-end;
    pointer-events: none;
}

.featured-image img,
.featured-image svg {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
}

/* Calendar Widget */
.calendar-widget {
    background: #fff;
    border-radius: 12px;
    padding: 24px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    display: flex;
    flex-direction: column;
}

.calendar-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding: 0 4px;
}

.month-title {
    font-size: 1.5rem;
    font-weight: 700;
    color: #333;
    border-left: 4px solid #0056D2;
    padding-left: 12px;
    line-height: 1;
}

.calendar-nav {
    display: flex;
    gap: 8px;
}

.nav-btn {
    background: transparent;
    border: none;
    cursor: pointer;
    padding: 4px;
    color: #666;
    display: flex;
    align-items: center;
    justify-content: center;
}

.nav-btn:hover {
    color: #000;
}

.weekdays-row {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    text-align: center;
    margin-bottom: 12px;
}

.weekdays-row span {
    font-size: 0.85rem;
    color: #999;
}

.days-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    row-gap: 8px;
}

.day-cell {
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.95rem;
    color: #333;
    cursor: pointer;
    border-radius: 4px;
    position: relative;
    transition: all 0.2s;
}

.day-cell:hover:not(.empty) {
    background: #f0f0f0;
}

.day-cell.current-month {
    color: #333;
}

.day-cell.other-month {
    color: #ccc;
}

.day-cell.today {
    background: #0056D2;
    color: #fff;
    font-weight: 600;
    box-shadow: 0 2px 4px rgba(0, 86, 210, 0.3);
}

.day-cell.has-event {
    background-color: #E6F7FF;
    color: #0056D2;
    font-weight: 600;
}

/* Ensure 'today' style takes precedence for background but keeps event indication */
.day-cell.today.has-event {
    background: #0056D2;
    color: #fff;
}

/* Multi-day event continuous display */
.day-cell.event-start {
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
}

.day-cell.event-middle {
    border-radius: 0;
}

.day-cell.event-end {
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
}

/* If a middle/end day is also 'today', keep the radius to highlight it's today? 
   Or prioritize the continuous look? 
   Usually 'today' circle/rounded square is more important for navigation.
   Let's keep 'today' border radius (4px) or make it distinct.
   The .today selector usually appears later or has higher specificity. 
   But here .day-cell.today is defined before .day-cell.event-start if I append.
   I should place .day-cell.today AFTER these or use !important or higher specificity.
   
   Actually, 'today' is a state of the day, 'event-start' is a property of the event.
   If today is in the middle of an event, it should probably look like today (highlighted) 
   but maybe still connect?
   Connecting a highlighted block to a light block looks weird.
   Let's just let 'today' override the border-radius to be a standalone block 
   so the user clearly sees "Today". 
   So I will NOT use !important on event classes, and ensure .today comes after or has specificity.
   Wait, .today has class selector.
   
   Let's place the event styles BEFORE .today or ensure .today overrides.
*/

.event-dot {
    position: absolute;
    bottom: 4px;
    width: 4px;
    height: 4px;
    background: #0056D2;
    border-radius: 50%;
}

.day-cell.today .event-dot {
    background: #fff;
}

.day-cell.has-event:not(.today) .event-dot {
    background: #0056D2;
    opacity: 0.6; /* Slightly softer on the light blue background */
}

/* Calendar Tooltip */
.day-cell[data-tooltip] {
    position: relative;
}

.day-cell[data-tooltip]:hover::after {
    content: attr(data-tooltip);
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0, 0, 0, 0.8);
    color: #fff;
    padding: 6px 10px;
    border-radius: 4px;
    font-size: 0.75rem;
    white-space: pre;
    z-index: 10;
    pointer-events: none;
    margin-bottom: 6px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

.day-cell[data-tooltip]:hover::before {
    content: '';
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    border-width: 6px 6px 0;
    border-style: solid;
    border-color: rgba(0, 0, 0, 0.8) transparent transparent transparent;
    z-index: 10;
    margin-bottom: 0px;
}

/* Sub Cards */
.sub-card {
    border-radius: 12px;
    padding: 24px;
    position: relative;
    overflow: hidden;
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    min-height: 180px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.05);
}

.card-light {
    background: #fff;
    border: 1px solid #eee;
}

.card-dark {
    background: #0D1B3E; /* Deep Blue */
    color: #fff;
}

.sub-card-content {
    max-width: 65%;
    position: relative;
    z-index: 2;
    display: flex;
    flex-direction: column;
    height: 100%;
}

.sub-title {
    font-size: 1.1rem;
    font-weight: 700;
    margin-bottom: 16px;
    line-height: 1.4;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.card-light .sub-title { color: #333; }
.card-dark .sub-title { color: #fff; }

.featured-info.text-dark { color: #666; }
.featured-info.text-light { color: rgba(255,255,255,0.8); }

.text-truncate {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.btn-detail {
    margin-top: auto;
    padding: 8px 24px;
    border-radius: 4px;
    font-size: 0.9rem;
    font-weight: 500;
    cursor: pointer;
    border: none;
    width: fit-content;
}

.btn-detail.primary {
    background: #0070FF;
    color: #fff;
}

.btn-detail.primary:hover {
    background: #0056D2;
}

.btn-detail.glass {
    background: rgba(255,255,255,0.2);
    color: #fff;
    backdrop-filter: blur(4px);
}

.btn-detail.glass:hover {
    background: rgba(255,255,255,0.3);
}

.sub-card-image {
    position: absolute;
    right: 0;
    bottom: 0;
    width: 40%;
    height: 100%;
    display: flex;
    align-items: flex-end;
    justify-content: flex-end;
}

.sub-card-image img {
    max-width: 100%;
    max-height: 90%;
    object-fit: contain;
}

/* Original Main Content Adjustments */
.activity-main {
    padding-top: 20px;
}

/* Filter Toolbar */
.filter-toolbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 32px;
    border-bottom: 1px solid var(--color-border);
    padding-bottom: 16px;
}

.filter-group {
    display: flex;
    gap: 24px;
}

.filter-item {
    font-size: 1rem;
    font-weight: 500;
    color: var(--color-text-secondary);
    cursor: pointer;
    padding-bottom: 16px;
    margin-bottom: -17px; /* Align with border-bottom */
    border-bottom: 2px solid transparent;
    transition: var(--transition-fast);
}

.filter-item:hover {
    color: var(--color-accent);
}

.filter-item.active {
    color: var(--color-accent);
    border-bottom-color: var(--color-accent);
}

.filter-actions {
    display: flex;
    gap: 16px;
}

.dropdown-filter {
    position: relative;
    display: flex;
    align-items: center;
    gap: 6px;
    cursor: pointer;
    font-size: 0.9rem;
    color: var(--color-text-secondary);
}

.dropdown-filter:hover {
    color: var(--color-text-primary);
}

.dropdown-icon {
    width: 16px;
    height: 16px;
}

/* Activity List */
.activity-list {
    display: grid;
    grid-template-columns: repeat(3, 1fr); /* 3列布局 */
    gap: 24px;
    margin-bottom: 40px;
}

.activity-card {
    background: var(--color-bg-primary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    overflow: hidden;
    transition: var(--transition-smooth);
    display: flex;
    flex-direction: column;
    position: relative; /* For badge positioning */
}

.activity-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-card-hover);
    border-color: var(--color-accent-border);
}

.activity-image-wrapper {
    position: relative;
    width: 100%;
    padding-top: 56.25%; /* 16:9 Aspect Ratio */
    background: var(--color-bg-secondary);
    overflow: hidden;
}

.activity-image {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.5s ease;
}

.activity-card:hover .activity-image {
    transform: scale(1.05);
}

.activity-status-badge {
    position: absolute;
    top: 12px;
    right: 12px;
    padding: 4px 10px;
    border-radius: var(--radius-full);
    font-size: 0.75rem;
    font-weight: 600;
    z-index: 2;
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(4px);
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.status-registering {
    color: var(--color-accent);
    border: 1px solid var(--color-accent);
}

.status-ongoing {
    color: var(--color-success);
    border: 1px solid var(--color-success);
}

.status-ended {
    color: var(--color-text-tertiary);
    border: 1px solid var(--color-border);
    background: #f5f5f5;
}

.activity-content {
    padding: 20px;
    flex: 1;
    display: flex;
    flex-direction: column;
}

.activity-title {
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--color-text-primary);
    margin-bottom: 12px;
    line-height: 1.4;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.activity-meta {
    margin-top: auto;
    display: flex;
    flex-direction: column;
    gap: 8px;
    font-size: 0.85rem;
    color: var(--color-text-secondary);
}

.meta-item {
    display: flex;
    align-items: center;
    gap: 6px;
}

.meta-icon {
    width: 16px;
    height: 16px;
    color: var(--color-text-tertiary);
}

.activity-tags {
    display: flex;
    gap: 8px;
    margin-top: 16px;
    flex-wrap: wrap;
}

.activity-tag {
    padding: 2px 8px;
    background: var(--color-bg-tertiary);
    color: var(--color-text-secondary);
    border-radius: var(--radius-sm);
    font-size: 0.75rem;
}

.activity-action {
    margin-top: 20px;
}

.btn-activity {
    width: 100%;
    padding: 10px;
    border-radius: var(--radius-md);
    font-size: 0.9rem;
    font-weight: 500;
    text-align: center;
    cursor: pointer;
    transition: var(--transition-fast);
    border: 1px solid var(--color-accent);
    background: transparent;
    color: var(--color-accent);
}

.btn-activity:hover {
    background: var(--color-accent);
    color: #fff;
}

.btn-activity.disabled {
    border-color: var(--color-border);
    color: var(--color-text-tertiary);
    cursor: not-allowed;
}

.btn-activity.disabled:hover {
    background: transparent;
    color: var(--color-text-tertiary);
}

/* Pagination */
.pagination-container {
    display: flex;
    justify-content: center;
    gap: 8px;
    margin-top: 20px;
}

/* Responsive */
@media (max-width: 992px) {
    .dashboard-row-top {
        grid-template-columns: 1fr;
    }
    
    .dashboard-row-bottom {
        grid-template-columns: 1fr;
    }
    
    .activity-list {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .featured-image {
        opacity: 0.2; /* Fade image on mobile/tablet to make text readable */
    }
}

@media (max-width: 768px) {
    .activity-list {
        grid-template-columns: 1fr;
    }
    
    .filter-toolbar {
        flex-direction: column;
        align-items: flex-start;
        gap: 16px;
    }
}
