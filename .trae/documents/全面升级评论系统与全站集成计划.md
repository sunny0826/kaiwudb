# 全面升级评论系统与全站集成计划

鉴于当前环境为纯静态前端原型，我将通过 **前端模拟 (Frontend Mock)** 和 **LocalStorage** 技术来实现上述的高级功能，为您展示一个完整的、高保真的系统原型。

## 1. 全站集成 (Cross-Page Integration)
将评论系统部署到所有核心页面，并确保样式适配：
*   **产品详情页 (`products.html`)**: 适配侧边栏布局，确保 Pin 不会被遮挡。
*   **用户登录页 (`register.html`)**: 适配左右分栏布局。
*   **文档页 (`docs/index.html`)**: 确保与现有集成保持稳定。
*   **技术实现**: 统一在各页面引入 `comments.css` 和 `comments.js`。

## 2. 评论功能增强 (Feature Enhancement)
### 2.1 富文本与表情 (Rich Text)
*   **升级输入框**: 支持简单的富文本操作（加粗、斜体）和 **Emoji 表情选择器**。
*   **图片上传模拟**: 添加图片按钮，点击后模拟上传（插入占位图或 Base64）。

### 2.2 评论列表与懒加载 (List View & Lazy Load)
*   **侧边评论栏**: 在协作工具栏增加 "列表模式" 按钮，从右侧滑出所有评论的列表。
*   **模拟分页/懒加载**: 列表中实现 "加载更多" 交互，模拟分页请求效果。

### 2.3 模拟用户身份 (Mock Auth)
*   **身份切换**: 在工具栏增加 "用户设置"，允许切换当前模拟的用户（如：管理员、访客、开发者），评论将显示不同头像和身份标识。

## 3. 分享功能升级 (Social Share)
*   **社交分享 UI**: 在分享弹窗中增加 **微信** (生成模拟二维码)、**微博/QQ** (生成分享链接) 的图标入口。
*   **预览卡片**: 自动生成一段包含当前页面标题和评论数的文本摘要，用于复制分享。

## 4. 后台管理系统 (Admin Dashboard)
*   **新建 `admin.html`**: 创建一个独立的评论管理后台原型。
*   **功能**:
    *   **数据概览**: 展示全站评论总数、待审核数。
    *   **审核列表**: 读取 LocalStorage 中的所有评论，提供 "通过"、"拒绝"、"删除" 操作。
    *   **模拟审核机制**: 被拒绝的评论在前端页面将不再显示或显示为 "已折叠"。

## 5. 实施步骤

### Phase 1: 核心库升级 (`js/comments.js` & `css/comments.css`)
1.  **重构 UI**: 增加 Emoji Picker、格式化工具栏、图片上传按钮的样式和逻辑。
2.  **增加用户系统**: 实现 `UserSystem` 类，管理当前用户信息 (Avatar, Name, Role)。
3.  **增加侧边列表**: 实现评论列表的侧滑抽屉组件 (`CommentDrawer`)。

### Phase 2: 页面集成
1.  修改 `products.html` 和 `register.html`，引入相关 CSS/JS 资源。
2.  针对不同页面的布局特性（如 `register.html` 的深色侧边栏）微调 Pin 的显示样式。

### Phase 3: 高级分享与后台
1.  升级分享弹窗 UI，实现社交媒体分享模拟逻辑。
2.  开发 `admin.html`，实现基于 LocalStorage 的管理界面。

### Phase 4: 性能与测试
1.  **代码优化**: 确保 `comments.js` 使用模块化结构，避免全局污染。
2.  **兼容性验证**: 确保在 Chrome/Safari (模拟) 下表现一致。

请确认是否执行此全栈原型升级计划？