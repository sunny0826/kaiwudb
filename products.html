<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>产品中心 - KaiwuDB</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/products.css">
</head>
<body>

    <!-- 导航栏占位符 -->
    <div id="navbar-placeholder"></div>

    <!-- 产品 Banner -->
    <section class="product-banner">
        <div class="banner-container">
            <div class="banner-content">
                <h1 class="banner-title">KaiwuDB 企业版</h1>
                <p class="banner-desc">KaiwuDB 是一款面向 AIoT 场景的分布式、多模融合、支持原生 AI 的数据库产品，为各行业客户伙伴提供一站式数据存储、管理与分析的基座</p>
                <div class="banner-actions">
                    <div class="banner-buttons">
                        <a href="register.html" class="btn btn-primary banner-btn">立即咨询</a>
                        <a href="community.html" class="btn btn-outline banner-btn-outline">软件下载</a>
                    </div>
                    <div class="banner-links">
                        <a href="docs/index.html" class="banner-link">产品文档 &gt;</a>
                        <a href="demo.html" class="banner-link">免费体验 &gt;</a>
                    </div>
                </div>
            </div>
            <div class="banner-visual">
                <div class="isometric-cubes">
                    <div class="cube cube-lg"></div>
                    <div class="cube cube-md"></div>
                    <div class="cube cube-sm"></div>
                </div>
            </div>
        </div>
    </section>
        
    <div class="banner-bottom-card">
        <div class="card-grid">
            <div class="card-item">
                    <div class="card-content">
                        <h3>中国信通院可信数据库认证</h3>
                        <a href="#" class="card-link-text">查看详情 &gt;&gt;</a>
                    </div>
                    <div class="card-arrow">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                    </div>
                </div>
                <div class="card-item">
                    <div class="card-content">
                        <h3>BenchANT 排名第一</h3>
                        <a href="#" class="card-link-text">查看详情 &gt;&gt;</a>
                    </div>
                    <div class="card-arrow">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                    </div>
                </div>
                <div class="card-item">
                    <div class="card-content">
                        <h3>主流操作系统全兼容</h3>
                        <a href="#" class="card-link-text">查看详情 &gt;&gt;</a>
                    </div>
                    <div class="card-arrow">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 产品页主体 -->
    <div class="products-layout">
        <!-- 右侧内容 -->
        <main class="products-content">
            <!-- 产品优势板块 -->
            <section id="section-advantages" class="product-section">
                <h2 class="section-heading">为什么选择 KaiwuDB</h2>
                
                <div class="advantages-grid">
                    <!-- 1. 高性能时序数据处理 -->
                    <div class="advantage-card">
                        <div class="advantage-icon-wrapper">
                            <div class="advantage-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
                                </svg>
                            </div>
                        </div>
                        <div class="advantage-content">
                            <h3>高性能时序数据处理</h3>
                            <p>专为海量物联网数据设计，提供每秒百万级写入与毫秒级查询能力，支持高压缩比存储，大幅降低存储成本。</p>
                        </div>
                    </div>

                    <!-- 2. 多模架构支持 -->
                    <div class="advantage-card">
                        <div class="advantage-icon-wrapper">
                            <div class="advantage-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polygon points="12 2 2 7 12 12 22 7 12 2"></polygon>
                                    <polyline points="2 17 12 22 22 17"></polyline>
                                    <polyline points="2 12 12 17 22 12"></polyline>
                                </svg>
                            </div>
                        </div>
                        <div class="advantage-content">
                            <h3>多模架构支持</h3>
                            <p>融合时序、关系型等多种数据模型，通过统一 SQL 接口实现跨模型数据的高效管理与分析，打破数据孤岛。</p>
                        </div>
                    </div>

                    <!-- 3. 分布式系统设计 -->
                    <div class="advantage-card">
                        <div class="advantage-icon-wrapper">
                            <div class="advantage-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <rect x="2" y="2" width="20" height="8" rx="2" ry="2"></rect>
                                    <rect x="2" y="14" width="20" height="8" rx="2" ry="2"></rect>
                                    <line x1="6" y1="6" x2="6.01" y2="6"></line>
                                    <line x1="6" y1="18" x2="6.01" y2="18"></line>
                                </svg>
                            </div>
                        </div>
                        <div class="advantage-content">
                            <h3>分布式系统设计</h3>
                            <p>采用原生分布式架构，支持弹性水平扩展，确保高可用性与数据强一致性，轻松应对业务规模的快速增长。</p>
                        </div>
                    </div>

                    <!-- 4. 人工智能集成 -->
                    <div class="advantage-card">
                        <div class="advantage-icon-wrapper">
                            <div class="advantage-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M12 2a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2 2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z"></path>
                                    <path d="M12 16a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-2a2 2 0 0 1 2-2z"></path>
                                    <path d="M2 10a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-4z"></path>
                                    <path d="M18 10a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2v-4z"></path>
                                    <line x1="12" y1="8" x2="12" y2="16"></line>
                                    <line x1="8" y1="12" x2="16" y2="12"></line>
                                </svg>
                            </div>
                        </div>
                        <div class="advantage-content">
                            <h3>人工智能集成</h3>
                            <p>内置原生 AI 引擎，支持数据库内的机器学习与预测分析，实现自动化运维与智能数据洞察，挖掘数据深层价值。</p>
                        </div>
                    </div>

                    <!-- 5. 企业级安全保障 -->
                    <div class="advantage-card">
                        <div class="advantage-icon-wrapper">
                            <div class="advantage-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                                </svg>
                            </div>
                        </div>
                        <div class="advantage-content">
                            <h3>企业级安全保障</h3>
                            <p>提供多层级加密、细粒度访问控制与审计机制，全面符合等保与行业合规要求，为核心数据资产构筑坚实防线。</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 功能特性 -->
            <section id="section-features" class="product-section">
                <!-- Section Header -->
                <div class="features-section-header">
                    <h2 class="section-heading">功能特性</h2>
                    <p class="section-subtitle">
                        KaiwuDB 打造全场景覆盖的分布式多模数据库，通过多模融合、流计算与云边端协同等核心能力，为工业物联网与数字能源提供强劲的数据底座。
                    </p>
                </div>

                <!-- Features Container -->
                <div class="features-container">
                    <!-- 1. 多模融合 -->
                    <div class="feature-row">
                        <div class="feature-text-col">
                            <h3>多模融合架构</h3>
                            <p>打破传统单模数据库的孤岛效应，KaiwuDB 在统一内核中原生支持时序数据、关系型数据、图数据等多种数据模型。通过统一的 SQL 接口，实现跨模态数据的高效关联查询与分析，大幅简化技术栈复杂度。</p>
                            <ul class="feature-check-list">
                                <li>统一 SQL 接口访问多模数据</li>
                                <li>异构数据零ETL实时融合</li>
                                <li>大幅降低开发与运维成本</li>
                            </ul>
                        </div>
                        <div class="feature-image-col">
                            <div class="feature-image-placeholder variant-1">
                                <div class="placeholder-graphic">
                                    <div class="graphic-layer layer-1"></div>
                                    <div class="graphic-layer layer-2"></div>
                                    <div class="graphic-icon"><i data-lucide="database"></i></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 2. 数据分发 -->
                    <div class="feature-row reverse">
                        <div class="feature-text-col">
                            <h3>智能数据分发</h3>
                            <p>构建从中心到边缘的高效数据流动通道。支持基于规则的实时订阅与发布，确保数据在云、边、端之间按需流转。内置断点续传与数据校验机制，在弱网环境下依然保证数据分发的可靠性与一致性。</p>
                            <ul class="feature-check-list">
                                <li>云边端数据实时同步</li>
                                <li>弱网环境高可靠传输</li>
                                <li>细粒度分发策略配置</li>
                            </ul>
                        </div>
                        <div class="feature-image-col">
                            <div class="feature-image-placeholder variant-2">
                                <div class="placeholder-graphic">
                                    <div class="graphic-grid"></div>
                                    <div class="graphic-node node-center"></div>
                                    <div class="graphic-node node-1"></div>
                                    <div class="graphic-node node-2"></div>
                                    <div class="graphic-line"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 3. 流计算 -->
                    <div class="feature-row">
                        <div class="feature-text-col">
                            <h3>原生流计算引擎</h3>
                            <p>内置高性能流计算引擎，无需外部组件即可实现数据的实时处理与分析。支持复杂事件处理 (CEP)、时间窗口聚合与连续查询，将数据处理延迟降低至毫秒级，帮助企业实时捕捉业务价值。</p>
                            <ul class="feature-check-list">
                                <li>内置引擎，无需额外部署</li>
                                <li>毫秒级实时数据处理</li>
                                <li>支持复杂窗口与聚合逻辑</li>
                            </ul>
                        </div>
                        <div class="feature-image-col">
                            <div class="feature-image-placeholder variant-3">
                                <div class="placeholder-graphic">
                                    <div class="graphic-wave"></div>
                                    <div class="graphic-bar-chart">
                                        <div class="bar bar-1"></div>
                                        <div class="bar bar-2"></div>
                                        <div class="bar bar-3"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 4. 云边端协同 -->
                    <div class="feature-row reverse">
                        <div class="feature-text-col">
                            <h3>云边端一体化协同</h3>
                            <p>打破物理边界，实现算力与数据的全域协同。边缘侧负责实时采集与初步清洗，中心侧负责长期存储与深度分析。统一的管理控制台让您像管理单机一样管理分布在各地的数据库实例。</p>
                            <ul class="feature-check-list">
                                <li>统一控制台全局管理</li>
                                <li>边缘自治与云端协同</li>
                                <li>算力资源智能调度</li>
                            </ul>
                        </div>
                        <div class="feature-image-col">
                            <div class="feature-image-placeholder variant-4">
                                <div class="placeholder-graphic">
                                    <div class="graphic-cloud"></div>
                                    <div class="graphic-edge-device"></div>
                                    <div class="graphic-signal"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 技术创新 (Tech Innovation Tabs) -->
            <section id="section-tech-innovation" class="product-section">
                <div class="features-section-header">
                    <h2 class="section-heading">技术创新</h2>
                    <p class="section-subtitle">
                        深耕核心技术，突破性能瓶颈，为关键业务提供坚实的底层支撑。
                    </p>
                </div>

                <div class="tech-tabs-container">
                    <!-- Tab Navigation -->
                    <div class="tech-tabs-nav" role="tablist">
                        <button class="tech-tab-btn active" role="tab" aria-selected="true" aria-controls="tech-panel-1" data-tab="1">
                            时序执行引擎
                        </button>
                        <button class="tech-tab-btn" role="tab" aria-selected="false" aria-controls="tech-panel-2" data-tab="2">
                            跨模查询
                        </button>
                        <button class="tech-tab-btn" role="tab" aria-selected="false" aria-controls="tech-panel-3" data-tab="3">
                            实时压缩时序引擎
                        </button>
                        <button class="tech-tab-btn" role="tab" aria-selected="false" aria-controls="tech-panel-4" data-tab="4">
                            分布式写入
                        </button>
                    </div>

                    <!-- Tab Panels -->
                    <div class="tech-tabs-content">
                        <!-- Panel 1: 时序执行引擎 -->
                        <div class="tech-tab-panel active" id="tech-panel-1" role="tabpanel" data-tab="1">
                            <div class="tech-panel-inner">
                                <div class="tech-text">
                                    <h3>专为时序优化的执行引擎</h3>
                                    <p>针对时序数据高并发写入与查询的特点，KaiwuDB 重新设计了底层执行引擎。采用列式存储与向量化执行技术，极大提升了聚合查询与降采样分析的性能。支持乱序写入自动处理与高效的 LSM-Tree 存储结构，确保在海量数据写入压力下依然保持稳定的读写吞吐。</p>
                                    <ul class="feature-check-list">
                                        <li>向量化执行，CPU 利用率提升 300%</li>
                                        <li>支持乱序数据高效写入</li>
                                        <li>自适应压缩算法</li>
                                    </ul>
                                </div>
                                <div class="tech-visual">
                                    <div class="tech-placeholder-visual v1">
                                        <div class="tech-icon"><i data-lucide="cpu"></i></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Panel 2: 跨模查询 -->
                        <div class="tech-tab-panel" id="tech-panel-2" role="tabpanel" data-tab="2">
                            <div class="tech-panel-inner">
                                <div class="tech-text">
                                    <h3>打破边界的跨模态查询</h3>
                                    <p>通过统一的查询优化器，KaiwuDB 能够解析并优化涉及时序表与关系表的混合查询。用户无需编写复杂的应用层代码来拼接数据，只需一条 SQL 即可实现设备运行状态（时序）与设备台账信息（关系）的关联分析，让数据价值挖掘更直接、更高效。</p>
                                    <ul class="feature-check-list">
                                        <li>统一 SQL 接口</li>
                                        <li>智能查询计划优化</li>
                                        <li>零数据搬迁成本</li>
                                    </ul>
                                </div>
                                <div class="tech-visual">
                                    <div class="tech-placeholder-visual v2">
                                        <div class="tech-icon"><i data-lucide="git-merge"></i></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Panel 3: 实时压缩时序引擎 -->
                        <div class="tech-tab-panel" id="tech-panel-3" role="tabpanel" data-tab="3">
                            <div class="tech-panel-inner">
                                <div class="tech-text">
                                    <h3>极致存储效率的压缩引擎</h3>
                                    <p>内置多种针对时序数据的专用压缩算法（如 Gorilla、Delta-of-Delta），并结合自适应编码策略，实现高达 10:1 甚至 20:1 的压缩比。支持数据写入即压缩，大幅降低存储成本的同时，减少磁盘 I/O 开销，提升查询加载速度。</p>
                                    <ul class="feature-check-list">
                                        <li>高压缩比降低 TCO</li>
                                        <li>写入即压缩，无后台负担</li>
                                        <li>查询时无需完全解压</li>
                                    </ul>
                                </div>
                                <div class="tech-visual">
                                    <div class="tech-placeholder-visual v3">
                                        <div class="tech-icon"><i data-lucide="minimize-2"></i></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Panel 4: 分布式写入 -->
                        <div class="tech-tab-panel" id="tech-panel-4" role="tabpanel" data-tab="4">
                            <div class="tech-panel-inner">
                                <div class="tech-text">
                                    <h3>高可用分布式写入架构</h3>
                                    <p>采用 Shared-Nothing 架构，支持多节点并行写入与水平扩展。通过 Raft 共识算法保证数据的强一致性与高可用性。智能负载均衡机制能够自动将写入流量分发至各个节点，避免单点瓶颈，轻松应对千万级设备并发接入。</p>
                                    <ul class="feature-check-list">
                                        <li>线性水平扩展能力</li>
                                        <li>Raft 协议保障数据一致性</li>
                                        <li>自动负载均衡与故障转移</li>
                                    </ul>
                                </div>
                                <div class="tech-visual">
                                    <div class="tech-placeholder-visual v4">
                                        <div class="tech-icon"><i data-lucide="server"></i></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 客户案例 -->
            <section id="section-customer-cases" class="product-section">
                <div class="features-section-header">
                    <h2 class="section-heading">客户案例</h2>
                </div>

                <div class="customer-cases-grid">
                    <!-- Case 1: 某重工集团 -->
                    <div class="case-card">
                        <div class="case-header">
                            <div class="case-logo">
                                <span class="logo-icon zuoyebang">重工</span>
                                <span class="logo-text">某重工集团</span>
                                <span class="logo-sub">KUAYUE-EXPRESS</span>
                            </div>
                            <div class="case-arrow">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <line x1="5" y1="12" x2="19" y2="12"></line>
                                    <polyline points="12 5 19 12 12 19"></polyline>
                                </svg>
                            </div>
                        </div>
                        <p class="case-desc">系统的数据入库性能提升 2-8 倍，多场景查询分析性能提升了 10%-30%</p>
                    </div>

                    <!-- Case 2: EEO -->
                    <div class="case-card">
                        <div class="case-header">
                            <div class="case-logo">
                                <span class="logo-text eeo">内蒙碳计量中心</span>
                            </div>
                            <div class="case-arrow">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <line x1="5" y1="12" x2="19" y2="12"></line>
                                    <polyline points="12 5 19 12 12 19"></polyline>
                                </svg>
                            </div>
                        </div>
                        <p class="case-desc">稳定运行超 6个月，实现千万数据毫秒级写入，突破了传统的碳数据分散管理模式</p>
                    </div>

                    <!-- Case 3: 跨越速运 -->
                    <div class="case-card">
                        <div class="case-header">
                            <div class="case-logo">
                                <span class="logo-icon kye">KYE</span>
                                <span class="logo-text">奇瑞青岛工厂</span>
                                <span class="logo-sub">KUAYUE-EXPRESS</span>
                            </div>
                            <div class="case-arrow">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <line x1="5" y1="12" x2="19" y2="12"></line>
                                    <polyline points="12 5 19 12 12 19"></polyline>
                                </svg>
                            </div>
                        </div>
                        <p class="case-desc">海量数据高效低成本接入，数据查询可实现 2000 万数据 150ms 反馈</p>
                    </div>
                </div>

                <div class="customer-cases-footer">
                    <a href="#" class="view-more-link">
                        点击查看更多 
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                            <polyline points="12 5 19 12 12 19"></polyline>
                        </svg>
                    </a>
                </div>
            </section>
        </main>
    </div>

    <!-- 底部操作区域 -->
    <section class="pre-footer-cta">
        <div class="cta-container">
            <h2 class="cta-title">准备好开启您的数据之旅了吗？</h2>
            <div class="cta-buttons">
                <a href="register.html" class="btn-cta-primary">立即咨询</a>
                <a href="community.html" class="btn-cta-secondary">免费试用</a>
            </div>
        </div>
    </section>

    <!-- 页脚 -->
    <footer class="footer" id="footer-placeholder">
        <!-- Footer will be loaded here via JS -->
    </footer>

    <!-- 悬浮咨询按钮 -->
    <a href="javascript:void(0)" class="float-consult-btn" aria-label="在线咨询">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path>
        </svg>
        <span>在线咨询</span>
    </a>

    <script src="js/main.js"></script>
    <script>
        // 平铺布局的滚动监听与平滑跳转
        document.addEventListener('DOMContentLoaded', () => {
            const navItems = document.querySelectorAll('.nav-item-vertical');
            const sections = document.querySelectorAll('.product-section');
            
            // 1. 点击导航平滑滚动
            navItems.forEach(item => {
                item.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetId = item.getAttribute('href').substring(1); // remove #
                    // 根据 href 找到对应的 section，这里 href 是 #advantages，但 section id 是 section-advantages
                    // 或者我们统一一下，href 直接对应 section id
                    // 查看 HTML 发现 href="#advantages", id="section-advantages"
                    // 我们可以通过 data-target 获取更准确
                    const targetSectionId = item.getAttribute('data-target');
                    const targetSection = document.getElementById(targetSectionId);
                    
                    if (targetSection) {
                        // 手动平滑滚动，考虑到 sticky header 的偏移
                        // CSS scroll-margin-top 已经处理了偏移，所以直接 scrollIntoView 即可
                        targetSection.scrollIntoView({
                            behavior: 'smooth'
                        });
                        
                        // 更新 URL hash，不触发跳转
                        history.pushState(null, null, `#${targetId}`);
                        
                        // 立即更新高亮
                        updateActiveNav(targetSectionId);
                    }
                });
            });

            // 2. 滚动监听更新高亮 & 触发 Section 动画
            // 使用 IntersectionObserver 还是 scroll 事件？
            // scroll 事件更实时，配合防抖
            
            // Section 动画观察者
            const sectionObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, {
                threshold: 0.1
            });

            sections.forEach(section => {
                sectionObserver.observe(section);
            });
            
            let isScrolling = false;
            
            window.addEventListener('scroll', () => {
                if (!isScrolling) {
                    window.requestAnimationFrame(() => {
                        highlightNavOnScroll();
                        isScrolling = false;
                    });
                    isScrolling = true;
                }
            });

            function highlightNavOnScroll() {
                let currentSectionId = '';
                
                // 找到当前视口中最靠上的 section
                sections.forEach(section => {
                    const rect = section.getBoundingClientRect();
                    // 如果 section 的顶部在视口中部以上，或者 section 占据了视口大部分
                    // 简单的逻辑：section top 小于视口高度的 1/3
                    if (rect.top <= window.innerHeight / 3) {
                        currentSectionId = section.id;
                    }
                });

                if (currentSectionId) {
                    updateActiveNav(currentSectionId);
                } else if (window.scrollY < 100) {
                     // 顶部时默认第一个
                     if (sections.length > 0) {
                         updateActiveNav(sections[0].id);
                     }
                }
            }

            function updateActiveNav(sectionId) {
                navItems.forEach(item => {
                    if (item.getAttribute('data-target') === sectionId) {
                        item.classList.add('active');
                    } else {
                        item.classList.remove('active');
                    }
                });
            }
            
            // 初始化高亮
            highlightNavOnScroll();
        });
    </script>
</body>
</html>
